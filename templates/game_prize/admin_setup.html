{% extends "base.html" %}

{% block title %}Configurazione Game Prize - Admin{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col-md-8">
            <h1>‚öôÔ∏è Configurazione Game Prize</h1>
            <p class="text-muted">Configura i parametri del gioco a premi</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-body">
                    <form method="POST">
                        <div class="mb-3">
                            <label for="game_name" class="form-label">Nome del Gioco</label>
                            <input type="text" class="form-control" id="game_name" name="game_name"
                                   value="{{ config[1] if config else 'Premio di Compleanno' }}" required>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="start_date" class="form-label">Data Inizio</label>
                                    <input type="datetime-local" class="form-control" id="start_date" name="start_date"
                                           value="{{ config[2] if config and config[2] else '' }}" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="end_date" class="form-label">Data Fine (Compleanno)</label>
                                    <input type="datetime-local" class="form-control" id="end_date" name="end_date"
                                           value="{{ config[3] if config and config[3] else '' }}" required>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="total_challenges" class="form-label">Numero Totale di Sfide</label>
                            <input type="number" class="form-control" id="total_challenges" name="total_challenges"
                                   value="{{ config[4] if config else 12 }}" min="1" required>
                            <small class="text-muted">Default: 12 sfide</small>
                        </div>

                        <div class="mb-3">
                            <label for="description" class="form-label">Descrizione del Gioco</label>
                            <textarea class="form-control" id="description" name="description" rows="4">{{ config[5] if config else '' }}</textarea>
                            <small class="text-muted">Descrizione che apparir√† nel dashboard</small>
                        </div>

                        <div class="alert alert-info">
                            <strong>Nota:</strong> Il vincitore verr√† rivelato quando il 50% delle sfide ({{ (12 // 2) }} sfide su 12) sar√† stato completato dai giocatori.
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary btn-lg">
                                üíæ Salva Configurazione
                            </button>
                        </div>

                        <div class="mt-3">
                            <a href="{{ url_for('game_prize.admin_dashboard') }}" class="btn btn-outline-secondary w-100">
                                Torna a Dashboard Admin
                            </a>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info Box -->
            <div class="alert alert-warning mt-4">
                <h5>‚ö†Ô∏è Parametri Importanti</h5>
                <ul class="mb-0">
                    <li><strong>Data Inizio:</strong> Quando cominciano le sfide</li>
                    <li><strong>Data Fine:</strong> Il giorno della festa di compleanno (quando il vincitore verr√† rivelato)</li>
                    <li><strong>Numero Sfide:</strong> Il numero totale di sfide da creare</li>
                    <li><strong>Milestone:</strong> La finale della sfida avverr√† quando il 50% delle sfide sar√† completato</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
