╔════════════════════════════════════════════════════════════════════════╗
║                   GAME PRIZE - DATA FLOW DIAGRAM                      ║
║                    Numero Partecipanti (~100)                         ║
╚════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────┐
│                         ADMIN SETUP PAGE                                │
│                    /game-prize/admin/setup                              │
└─────────────────────────────────────────────────────────────────────────┘
                                   │
                                   │ Form Submit (POST)
                                   ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                      FORM DATA EXTRACTION                               │
│   max_participants = request.form.get('max_participants', 100)         │
└─────────────────────────────────────────────────────────────────────────┘
                                   │
                                   │ Backend Handler
                                   │ (modules/game_prize.py)
                                   ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                    DATABASE OPERATIONS                                  │
│                                                                         │
│  UPDATE game_prize_config                                              │
│  SET max_participants = %s                                             │
│  WHERE id = 1                                                           │
│                                                                         │
│  OR                                                                      │
│                                                                         │
│  INSERT INTO game_prize_config (..., max_participants, ...)            │
│  VALUES (..., %s, ...)                                                  │
└─────────────────────────────────────────────────────────────────────────┘
                                   │
                    ┌──────────────┼──────────────┐
                    │              │              │
                    ▼              ▼              ▼
        ┌──────────────────┐  ┌──────────────┐  ┌──────────────┐
        │  Admin Dashboard │  │ Player Dash  │  │ Admin Setup  │
        │   (retrieval)    │  │ (retrieval)  │  │ (retrieval)  │
        └──────────────────┘  └──────────────┘  └──────────────┘
                    │              │              │
                    │ SELECT *     │ SELECT *     │ SELECT *
                    │ FROM ...     │ FROM ...     │ FROM ...
                    ▼              ▼              ▼
        ┌──────────────────┐  ┌──────────────┐  ┌──────────────┐
        │  config[5]       │  │ game_config  │  │  config[5]   │
        │  (max_partici    │  │ [5]          │  │  (display    │
        │   pants)         │  │ (max_partici │  │   in form)   │
        │                  │  │  pants)      │  │              │
        └──────────────────┘  └──────────────┘  └──────────────┘
                    │              │              │
                    ▼              ▼              ▼
        ┌──────────────────┐  ┌──────────────┐  ┌──────────────┐
        │   CARD:          │  │   HEADER:    │  │   INPUT:     │
        │ "Partecipanti    │  │  "👥 ~100    │  │  value="100" │
        │  Invitati"       │  │   parteci"   │  │              │
        │   Display: 100   │  │              │  │   Update on  │
        │                  │  │  + Stat      │  │   change     │
        │   + Stats grid   │  │   updates    │  │              │
        │                  │  │              │  │ min="1"      │
        └──────────────────┘  └──────────────┘  └──────────────┘


═════════════════════════════════════════════════════════════════════════

📍 DATA PERSISTENCE FLOW

      User Input (100)
            ↓
   HTML Form submission
            ↓
   Flask request.form.get('max_participants')
            ↓
   Python int() conversion
            ↓
   Database INSERT/UPDATE
            ↓
   Stored in: game_prize_config.max_participants
            ↓
   Retrieved on page load
            ↓
   Templated as: config[5]
            ↓
   Displayed to users


═════════════════════════════════════════════════════════════════════════

🔄 TEMPLATE RENDERING

Admin Setup Template:
    ├─ GET: Mostra form con {{ config[5] if config else 100 }}
    └─ POST: Salva e reindirizza

Admin Dashboard Template:
    ├─ Card Statistiche: {{ config[5] if config else 100 }}
    ├─ Info Box: "~{{ config[5] if config else 100 }}"
    └─ Aggiornato ogni caricamento pagina

Player Dashboard Template:
    ├─ Header: "👥 ~{{ game_config[5] }}"
    └─ Visibile a tutti i giocatori


═════════════════════════════════════════════════════════════════════════

🔗 RELATIONSHIP WITH OTHER FIELDS

game_prize_config
├─ id (Primary Key)
├─ game_name
├─ start_date
├─ end_date
├─ total_challenges
├─ max_participants ← TARGET FIELD
├─ description
├─ created_at
└─ updated_at

Correlation:
  max_participants (100) = Total invited
  active_players (?) = Accepted invites
  acceptance_rate = (active_players / max_participants) * 100


═════════════════════════════════════════════════════════════════════════

✨ VISUAL SUMMARY

┌──────────────────────────────────────────────────────────┐
│                    CONFIGURATION                         │
│                                                          │
│  Nome:              "Premio di Compleanno 25"           │
│  Data Inizio:       2024-11-01                          │
│  Data Fine:         2025-10-31                          │
│  Sfide Totali:      12                                  │
│  👥 Partecipanti:    100  ← NUOVO CAMPO                │
│  Descrizione:       "Gioco di sfide per compleanno"    │
│                                                          │
│  [Salva Configurazione]                                 │
└──────────────────────────────────────────────────────────┘


═════════════════════════════════════════════════════════════════════════

Status: ✅ FULLY INTEGRATED - 23 October 2025
